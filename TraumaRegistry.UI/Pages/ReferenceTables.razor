@page "/referencetables"
@page "/referencetables/{tableName}"


@inject NavigationManager NavigationManager

@if (table == null)
{
    <h2><i class="fas fa-table"></i>System Data Table</h2>
    <p><em>Loading...</em></p>
}
else
{
    <table class="table table-striped table-hover table-sm">
        <thead>
            <tr>
                <th>
                    Id
                </th>
                <th>
                    Code
                </th>
                <th>
                    Description
                </th>

                <th></th>
                <th></th>

            </tr>
        </thead>
        <tbody>
            @foreach (var rec in table.TableData)
            {
            <tr>
                <td>@rec.Id</td>
                <td>@rec.Code</td>
                <td>@rec.Description</td>
                <td><button class="btn btn-secondary btn-sm" @onclick="@(() => EditRecord(rec.Id))">View <i class="fas fa-pencil"></i></button></td>
                <td><button class="btn btn-danger btn-sm" @onclick="@(() => DeleteRecord(rec.Id))">View <i class="fas fa-trash"></i></button></td>
            </tr>
            }
        </tbody>
    </table>
}
@code {
    [Parameter]
    public string tableName { get; set; }
    string mode = "List";
    ReferenceTableClient client = new ReferenceTableClient();
    RefTableDTO table = null;


    protected override async Task OnInitializedAsync()
    {
        table = await client.GetRefTableDataAsync(tableName);
    }

    async Task EditRecord(int Id)
    {
        
    }

    async Task DeleteRecord(int Id)
    {
        
    }
}
